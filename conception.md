

Концепция:

Важно: мы не создаём отдельные файлы спецификации — спецификация выражена в BDD-сценариях, тестах и коде. Изменения требований вносятся через обновление сценариев и тестов; отдельной “бумажной” спецификации нет.
Система на основе PDD + BDD + TDD

TDD - Вся разработка происходит через тесты. Пишем тесты - изменяем код. Если тесты написать сложно, сначала пересматриваем дизайн и границы ответственности (разбиение на компоненты, контрактные интерфейсы); изменять спецификацию допускается только при выявленной неоднозначности или ошибке требований. Меняем только те тесты, чьё поведение корректно меняется по новой спецификации. После зеленых тестов по задаче - запускаем все тесты на проекте.

BDD — приёмочные сценарии уровня поведения (могут работать как e2e, так и на уровне компонентов/контрактов). При изменении спецификации - менять тесты.

PDD - разработка разделена на 3 стадии. 

С1 - Планирование; Анализ требований по задаче; Сопоставление того как задача будет взаимодействовать с существующим кодом; Продумывание спецификации и сценариев для BDD; Итеративное планирование - планируем и изменяем до тех пор, пока пользователь не согласится со спецификацией; Сценарии могут быть как новые, так и изменением существующих сценариев; Сначала создаём спецификацию: - детальное описание задачи с тем что должно быть и какой результат хотим получить, измеримые NFR: производительность (SLO/бюджеты), безопасность (требования/чек-листы), надёжность, стоимость, наблюдаемость (логирование/метрики), UX-критерии, - когда пользователь сказал что спецификация правильная проводится дополнительная проверка на конфликты в описании и с текущей работой программы и если есть то задаются уточняющие вопросы пользователю, - по мере создания спецификации нужно смотреть на существующий код и тесты которые не были написаны во время выполнения текущей задачи; После создаются юзкейс сценарии на основе спецификации: - нужно помечать какие новые а какие нужно изменить, - если нужно изменить какой-то сценарий то пишем файл и строку (нужно только лишь один раз для навигации во время изменения тестов и нигде не сохраняется), - если не хватает спецификации или пользователь говорит что что-то не так с сценариями то нужно вернуться к созданию спецификации.

С2 - Написание тестовых сценариев по BDD; Делаем сценарии тестов (cucumber/jest). Сценарии стабильны. Любая правка проходит через изменение спецификации. Код шагов можно менять свободно, не меняя поведение сценария.; Нужно учитывать так же эджкейсы и красные случаи, при написании сценариев , что бы покрыть как можно больше возможного поведения системы; Если ещё нет подходящего кода и его нужно будет только создать во время написания кода, то тесты могут быть красными до реализации, но внешние зависимости изолируем и покрываем contract tests: hermetic/локальные окружения, фабрики данных, contract tests на границах вместо живых интеграций. Моки разрешены на внешних границах; внутри домена — по минимуму; Генерируем стартовые step-definitions/фикстуры по шаблону. Разрешены правки только реализации шагов, а не текста сценариев.; Пишем сценарии только по предварительному анализу; Если пользователь сказал , что не хватает сценария или какой-то лишний / не правильный, то нужно вернуться к созданию спецификации; Пишем сценарии советующими с пользователем, пока он не скажет что всё хорошо.